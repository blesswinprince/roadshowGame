<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Defense Arcade ‚Äì Bug Gate Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
  <script defer src="game.js"></script>
</head>
<body>
  <div class="wrap">
    <!-- Top bar -->
    <header class="top-bar">
      <div class="top-left">
        <div class="game-title">Defense Arcade</div>
        <div class="sub-title">Catch bugs before they hit PROD üêûüî•</div>
      </div>
      <div class="top-right">
        <div class="top-row">
          <span class="label">Player:</span>
          <span id="playerName" class="pill pill-name">‚Äî</span>
        </div>
        <div class="top-row">
          <span class="label">Time:</span>
          <span id="timer" class="pill pill-timer">90</span>
        </div>
        <div class="top-buttons">
          <button id="btnTutorial" class="btn-ghost">How to Play</button>
          <button id="btnLB" class="btn-ghost">Leaderboard</button>
          <button id="btnStart" class="btn-primary">Start Game</button>
          <button id="btnAbort" class="btn-danger" disabled>Abort</button>
        </div>
      </div>
    </header>

    <!-- Main layout -->
    <main class="main-layout">
      <!-- Left side: HUD + gates + mini LB -->
      <section class="left-panel">
        <div class="panel panel-status">
          <div id="banner" class="banner">Ready</div>

          <div class="stats-grid">
            <div class="stat">
              <div class="stat-label">Score</div>
              <div id="score" class="stat-value">0</div>
            </div>
            <div class="stat">
              <div class="stat-label">Combo</div>
              <div id="combo" class="stat-value">0</div>
            </div>
            <div class="stat">
              <div class="stat-label">Bugs Left</div>
              <div id="remaining" class="stat-value">75</div>
            </div>
            <div class="stat">
              <div class="stat-label">Speed</div>
              <div id="speedLbl" class="stat-value">1.00x</div>
            </div>
          </div>

          <div class="health-bar">
            <div class="health-label">Production Health</div>
            <div class="health-outer">
              <div id="healthInner" class="health-inner"></div>
            </div>
          </div>

          <div class="upcoming">
            <div class="upcoming-label">Incoming bug</div>
            <div id="upcoming" class="upcoming-value">‚Äî</div>
          </div>
        </div>

        <div class="panel panel-gates">
          <div class="panel-heading">Drag a Gate</div>
          <div class="gate-row">
            <button class="gate-btn gate-unit" draggable="true" data-type="unit">UNIT</button>
            <button class="gate-btn gate-contract" draggable="true" data-type="contract">CONTRACT</button>
            <button class="gate-btn gate-integration" draggable="true" data-type="integration">INTEGRATION</button>
          </div>
          <div class="hint">Drag & drop onto a lane to block the bug.</div>
        </div>

        <div class="panel panel-leaderboard">
          <div class="panel-heading">Top Scores</div>
          <div id="lb" class="lb-mini">
            <!-- filled by JS -->
          </div>
        </div>

        <div class="panel panel-dev">
          <div class="panel-heading">Admin / Debug</div>
          <div class="dev-buttons">
            <button id="spawnBtn" class="btn-tiny">Spawn Bug</button>
            <button id="resetBtn" class="btn-tiny">Reset Session</button>
            <button id="clearLb" class="btn-tiny">Clear Firebase LB</button>
          </div>
        </div>
      </section>

      <!-- Game area -->
      <section id="gameArea" class="game-area">
        <div id="lanes" class="lanes">
          <!-- JS builds lanes -->
        </div>
        <div id="prodCol" class="prod-col healthy">
          <div class="prod-label">PROD</div>
          <div class="prod-sub">Don‚Äôt let bugs in!</div>
        </div>
      </section>
    </main>
  </div>

  <!-- Start overlay -->
  <div id="startOverlay" class="overlay overlay-start">
    <div class="overlay-card">
      <h2>Start a New Game</h2>
      <p class="overlay-text">
        Enter your name to join the leaderboard and catch some bugs!
      </p>
      <label for="playerNameInput" class="field-label">Player name</label>
      <input id="playerNameInput"
             class="field-input"
             type="text"
             maxlength="24"
             placeholder="e.g. Ramya, QA Ninja, Bug Slayer" />

      <div class="start-actions">
        <button id="startOverlayBtn" class="btn-primary" disabled>Start Game</button>
        <button id="startOverlayLBBtn" class="btn-ghost">View Leaderboard</button>
      </div>
    </div>
  </div>

  <!-- End overlay -->
  <div id="endOverlay" class="overlay overlay-end" style="display:none;">
    <div class="overlay-card">
      <h2 id="endTitle" class="end-title">Game Over</h2>
      <p id="endScore" class="end-score">Score: 0</p>
      <p id="endRank" class="end-rank"></p>
      <div class="end-actions">
        <button id="endBtnPlay" class="btn-primary">Play Again</button>
        <button id="endBtnLB" class="btn-ghost">View Leaderboard</button>
        <button id="endBtnNew" class="btn-ghost">Change Player</button>
      </div>
    </div>
  </div>

  <!-- Generic modal (tutorial + leaderboard) -->
  <div id="modal" class="modal" style="display:none;">
    <div class="modal-backdrop"></div>
    <div class="modal-window">
      <div id="modalContent" class="modal-content">
        <!-- filled by JS -->
      </div>
    </div>
  </div>
</body>
</html>
